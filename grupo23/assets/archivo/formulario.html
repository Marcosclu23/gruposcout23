<?php error_reporting(E_ALL); ?>
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Inscripción Grupo Scout 23</title>
    <link rel="stylesheet" href="estilos.css">
    <link rel="shortcut icon" href="../media/cropped-Imagotipo-Adisca-Vertical-Web-YB-192x192.png">
</head>
<body>

<h1>Formulario de Inscripción - Grupo Scout 23</h1>

<form action="" method="POST" enctype="multipart/form-data">

    <h2>Datos del niño/a</h2>
    <h4><u>¡Importante!</u> el niño/a tiene que tener una edad entre los 7 y 21 años</h4>
    
    <div class="columnas">
        <!-- Columna izquierda -->
        <div class="columna">
            <label>Nombre completo:</label>
            <input type="text" name="nombre" required>

            <label>Edad:</label>
            <input type="number" name="edad" required>

            <label>Fecha de nacimiento:</label>
            <input type="date" name="fecha_nac" required>
        </div>

        <!-- Columna derecha -->
        <div class="columna">
            <label>DNI Frente:</label>
            <input type="file" name="dni_frente_nino" accept="image/*" onchange="mostrarImagen(this, 'dni_frente_preview')">
            <img id="dni_frente_preview" style="max-width:65%; margin-top:10px; display:none;">

            <label>DNI Dorso:</label>
            <input type="file" name="dni_dorso_nino" accept="image/*" onchange="mostrarImagen(this, 'dni_dorso_preview')">
            <img id="dni_dorso_preview" style="max-width:65%; margin-top:10px; display:none;">
        </div>
    </div>

    <label>¿Tiene obra social?</label>
    <select name="obra_social_opcion" id="obra_social_opcion" onchange="mostrarObraSocial()">
        <option value="no">NO</option>
        <option value="si">SI</option>
    </select>

<div id="obra_social_contenedor" style="display:none; margin-top: 10px;">
    <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
        <!-- Columna izquierda: Frente -->
        <div style="flex: 1; max-width: 250px; text-align: center;">
            <label>Foto Obra Social (Frente):</label>
            <input type="file" name="obra_frente" accept="image/*" onchange="mostrarImagen(this, 'obra_frente_preview')">
            <img id="obra_frente_preview" style="max-width: 100%; margin-top:10px; display:none;">
        </div>

        <!-- Columna derecha: Dorso -->
        <div style="flex: 1; max-width: 250px; text-align: center;">
            <label>Foto Obra Social (Dorso):</label>
            <input type="file" name="obra_dorso" accept="image/*" onchange="mostrarImagen(this, 'obra_dorso_preview')">
            <img id="obra_dorso_preview" style="max-width: 100%; margin-top:10px; display:none;">
        </div>
    </div>
</div>

</form>
<br>
<form action="">
    <h2>Datos del adulto responsable</h2>
    <div class="junto">
        <label>Nombre del adulto:</label>
        <input type="text" name="tutor_nombre" required>

        <label>Relación (Padre, Madre o Tutor):</label>
        <select name="tutor_relacion" required>
            <option value="Padre">Padre</option>
            <option value="Madre">Madre</option>
            <option value="Tutor">Tutor</option>
        </select>
    </div>

    <label>DNI del adulto (Frente):</label>
    <input type="file" name="tutor_dni_frente" accept="image/*" onchange="mostrarImagen(this, 'tutor_dni_frente_preview')">
    <img id="tutor_dni_frente_preview" style="max-width:40%; margin-top:10px; display:none;">

    <label>DNI del adulto (Dorso):</label>
    <input type="file" name="tutor_dni_dorso" accept="image/*" onchange="mostrarImagen(this, 'tutor_dni_dorso_preview')">
    <img id="tutor_dni_dorso_preview" style="max-width:40%; margin-top:10px; display:none;">

<button type="submit" onclick="this.form.action='../../index.html';">Guardar Inscripción y Salir</button>
    <h4>Importante sacar captura de pantalla e imprimir los dos formularios, el niño/a y padre/madre/tutor</h4>
    <h5>igualmente debera trar la Obra social del niño/a y el DNI de ambos</h5>
</form>


<script>
function mostrarImagen(input, idImg) {
    const file = input.files[0];
    const preview = document.getElementById(idImg);

    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            preview.src = e.target.result;
            preview.style.display = 'block';
            // Ocultar el input una vez que se cargó la imagen
            input.style.display = 'none';
        }
        reader.readAsDataURL(file);
    } else {
        preview.src = '';
        preview.style.display = 'none';
        input.style.display = 'block'; // volver a mostrar si no hay archivo
    }
}
function mostrarObraSocial() {
    const select = document.getElementById("obra_social_opcion");
    document.getElementById("obra_social_contenedor").style.display =
        select.value === "si" ? "block" : "none";
}

document.getElementById('formulario').addEventListener('submit', function(e) {
    e.preventDefault();
    this.submit();
    window.location.href = '../../index.html';
});
</script>


</body>
</html>
